<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì‹œíŒ</title>
    {% load static %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"> <!-- í”„ë¦¬í…ë‹¤ë“œ í°íŠ¸ ì¶”ê°€ -->
    <link rel="stylesheet" href="{% static 'css/board.css' %}">
</head>
<body>
    <div class="mobile-screen"> <!-- ëª¨ë°”ì¼ í™”ë©´ ëŠë‚Œì„ ìœ„í•œ ì»¨í…Œì´ë„ˆ ì¶”ê°€ -->
        <a href="{% url 'í™ˆ' %}">
            <img src="https://cdn-icons-png.flaticon.com/512/122/122633.png" alt="ë’¤ë¡œ ê°€ê¸°" class="back-icon"> <!-- ë’¤ë¡œ ê°€ê¸° ì•„ì´ì½˜ -->
        </a>        
        <header class="header">
            <div class="left-header">
                <h2>ì•„íŒŒíŠ¸ ì£¼ë¯¼ ê²Œì‹œíŒ</h2>
            </div>
            <div class="right-header">
                <input type="text" placeholder="ê²€ìƒ‰" class="search-input"> <!-- ê²€ìƒ‰ ì…ë ¥ì°½ -->
                <button class="search-button">ğŸ”</button> <!-- ê²€ìƒ‰ ë²„íŠ¼ ì´ëª¨ì§€ -->
                <img src="https://cdn-icons-png.flaticon.com/512/9679/9679166.png" alt="ë©”ë‰´" class="menu-icon"> <!-- ë©”ë‰´ ì•„ì´ì½˜ -->
            </div>
                     
        </header>
        
        <a href="{% url 'ê¸€ì‘ì„±' %}" class="write-button">
            <img src="https://cdn-icons-png.flaticon.com/512/559/559463.png" alt="ê¸€ ì‘ì„±í•˜ê¸°" class="write-icon"> <!-- ê¸€ ì‘ì„±í•˜ê¸° ì´ë¯¸ì§€ -->
        </a>
        
        <br>      
        <ul>
            {% for post in posts %}
                <li>
                    <div class="post-info">
                        <img src="{{ post.author.profile_picture.url }}" alt="ìœ ì € í”„ë¡œí•„ ì‚¬ì§„" class="profile-pic"> <!-- ìœ ì € í”„ë¡œí•„ ì‚¬ì§„ -->
                        <span class="time-ago" data-timestamp="{{ post.created_at|date:'c' }}">{{ post.created_at|date:'c' }}</span> <!-- ISO 8601 í˜•ì‹ì˜ ë‚ ì§œ -->
                    </div>
                    <div class="post-title">
                        <a href="{% url 'ê¸€ì¡°íšŒ' post.id %}">{{ post.title }}</a> <!-- ê²Œì‹œë¬¼ ì œëª©ì„ í´ë¦­í•˜ë©´ ê²Œì‹œë¬¼ ìƒì„¸ë³´ê¸°ë¡œ ì´ë™ -->
                    </div>
                    <div class="post-stats">
                        <span class="stat-item">
                            <img src="https://cdn-icons-png.flaticon.com/512/8875/8875347.png" alt="ì¡°íšŒìˆ˜ ì•„ì´ì½˜" class="stat-icon"> <!-- ì¡°íšŒìˆ˜ ì•„ì´ì½˜ ì´ë¯¸ì§€ -->
                            ì¡°íšŒìˆ˜: {{ post.views|default:0 }} <!-- ì¡°íšŒìˆ˜ê°€ ì—†ì„ ê²½ìš° 0ìœ¼ë¡œ ì²˜ë¦¬ -->
                        </span>
                        <span class="stat-item">
                            <img src="https://cdn-icons-png.flaticon.com/512/10446/10446787.png" alt="ëŒ“ê¸€ ìˆ˜ ì•„ì´ì½˜" class="stat-icon"> <!-- ëŒ“ê¸€ ìˆ˜ ì•„ì´ì½˜ ì´ë¯¸ì§€ -->
                            ëŒ“ê¸€ìˆ˜: {{ post.comment_count|default:0 }} <!-- ëŒ“ê¸€ ìˆ˜ê°€ ì—†ì„ ê²½ìš° 0ìœ¼ë¡œ ì²˜ë¦¬ -->
                        </span>
                        <span class="stat-item">
                            <img src="https://cdn-icons-png.flaticon.com/512/17216/17216613.png" alt="ì¢‹ì•„ìš” ì•„ì´ì½˜" class="stat-icon"> <!-- ì¢‹ì•„ìš” ì•„ì´ì½˜ ì´ë¯¸ì§€ -->
                            ì¢‹ì•„ìš”: {{ post.likes|default:0 }} <!-- ì¢‹ì•„ìš”ê°€ ì—†ì„ ê²½ìš° 0ìœ¼ë¡œ ì²˜ë¦¬ -->
                        </span>
                    </div>
                    
                </li>
            {% empty %}
                <li>ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</li> <!-- ê²Œì‹œë¬¼ì´ ì—†ì„ ê²½ìš° ë©”ì‹œì§€ -->
            {% endfor %}
        </ul>
        
        <script>
        function timeAgo(date) {
            const now = new Date();
            const seconds = Math.floor((now - date) / 1000);
        
            let interval = Math.floor(seconds / 31536000);
            if (interval >= 1) return interval + "ë…„ ì „";
            interval = Math.floor(seconds / 2592000);
            if (interval >= 1) return interval + "ê°œì›” ì „";
            interval = Math.floor(seconds / 86400);
            if (interval >= 1) return interval + "ì¼ ì „";
            interval = Math.floor(seconds / 3600);
            if (interval >= 1) return interval + "ì‹œê°„ ì „";
            interval = Math.floor(seconds / 60);
            if (interval >= 1) return interval + "ë¶„ ì „";
            return "ë°©ê¸ˆ ì „";
        }
        
        document.querySelectorAll('.time-ago').forEach(element => {
            const timestamp = new Date(element.getAttribute('data-timestamp'));
            element.textContent = timeAgo(timestamp);
        });
        </script>
        
        
    </div>
</body>
</html>
